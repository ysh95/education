{"version":3,"sources":["webpack:///D:/work/Education/componets/login.vue?86c5","webpack:///D:/work/Education/componets/login.vue?9f55","webpack:///D:/work/Education/componets/login.vue?5629","webpack:///D:/work/Education/componets/login.vue?4de0","webpack:///D:/work/Education/componets/login.vue","webpack:///D:/work/Education/componets/login.vue?1914","webpack:///D:/work/Education/componets/login.vue?0f00"],"names":["app","getApp","data","userInfoButtonShow","onShow","onGetUserInfo","methods","uni","getSetting","success","res","authSetting","console","log","getUserInfo","userInfo","Object","assign","globalData","setUserInfo","that","login","request","url","$helper","requestUrl","method","header","code","nickname","nickName","sex","gender","headimgurl","avatarUrl","mobile","null2str","hideToast","statusCode","token","token_type","access_token","getIndexInfo","showModal","title","content","errmsg","authorization","hideLoading","status_code"],"mappings":"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","file":"componets/login.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=25f9af59&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"work/Education/componets/login.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=25f9af59&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\nconst app = getApp()\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserInfoButtonShow: true\n\t\t};\n\t},\n\tonShow() {\n\t\tthis.onGetUserInfo()\n\t},\n\tmethods:{\n\t\t// 用户信息获取\n\t\tonGetUserInfo() {\n\t\t\t// 查看是否授权\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.authSetting['scope.userInfo']) {\n\t\t\t\t\t\tthis.userInfoButtonShow = false;\n\t\t\t\t\t\tconsole.log(res, '-----------');\n\t\t\t\t\t\t// 已经授权，可以直接调用 getUserInfo 获取头像昵称\n\t\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\tthis.userInfo = Object.assign(this.userInfo, res.userInfo);\n\t\t\t\t\t\t\t\tapp.globalData.userInfo = this.userInfo;\n\t\t\t\t\t\t\t\t// 登录\n\t\t\t\t\t\t\t\tthis.setUserInfo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setUserInfo();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 提交用户信息\n\t\tsetUserInfo() {\n\t\t\tlet that = this\n\t\t\tuni.login({\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: `${this.$helper.requestUrl}auth/login`,\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t// 'content-type':'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcode: res.code,\n\t\t\t\t\t\t\tnickname: that.userInfo.nickName,\n\t\t\t\t\t\t\tsex: that.userInfo.gender,\n\t\t\t\t\t\t\theadimgurl: that.userInfo.avatarUrl,\n\t\t\t\t\t\t\tmobile: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: data => {\n\t\t\t\t\t\t\tres = this.$helper.null2str(res);\n\t\t\t\t\t\t\tuni.hideToast();\n\t\t\t\t\t\t\tconsole.log(data)\n\t\t\t\t\t\t\tif (data.statusCode === 200) {\n\t\t\t\t\t\t\t\tlet token = data.data.token_type + ' ' + data.data.access_token;\n\t\t\t\t\t\t\t\tapp.globalData.token = token;\n\t\t\t\t\t\t\t\tthat.getIndexInfo();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\tcontent: data.data.errmsg\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetIndexInfo() {\n\t\t\t// 用户信息获取\n\t\t\tuni.request({\n\t\t\t\turl: `${this.$helper.requestUrl}auth/me`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theader: {\n\t\t\t\t\tauthorization: app.globalData.token\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tres = this.$helper.null2str(res)\n\t\t\t\t\tconsole.log(res,'++++++++')\n\t\t\t\t\tif(res.data.status_code == 'ok'){\n\t\t\t\t\t\tthis.userInfo = res.data.data\n\t\t\t\t\t\tapp.globalData.userInfo = res.data.data\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t}\n}\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1587699381635\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}